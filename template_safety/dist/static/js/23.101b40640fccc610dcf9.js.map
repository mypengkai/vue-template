{"version":3,"sources":["webpack:///src/components/reformConent.vue","webpack:///./src/components/reformConent.vue?3383","webpack:///./src/components/reformConent.vue","webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./src/api/self.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js"],"names":["reformConent","props","components","reformLoop","__webpack_require__","e","then","bind","inject","data","type","fileList","sendData","id","replayUserId","replayUserName","srId","replayType","replayState","replayContent","filesId","methods","afterRead","file","_this","this","formData","FormData","append","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","key","value","err","return","api_self","uploadFile","res","success","obj","save","_this2","list","srUserId","srUserName","srid","$toast","reform","getSelf","reload","components_reformConent","render","_vm","_h","$createElement","_c","_self","staticClass","_l","item","index","attrs","label","spContent","slot","_v","_s","hdGrade","title","srContent","images","files","src","fileURL","FilePath","srFinishDate","loopConent","Reply","$store","state","userID","rows","autosize","placeholder","model","callback","$$v","$set","expression","capture","multiple","max-count","after-read","preview-size","size","on","click","_e","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","module","exports","default","__esModule","getSelfList","http","post","selfDeatil","downRectify","addSelf","anObject","get","getIterator","it","iterFn","TypeError","call"],"mappings":"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","file":"static/js/23.101b40640fccc610dcf9.js","sourcesContent":["<template>\r\n  <div class=\"reformConent\">\r\n    <van-cell-group v-for=\"(item,index) in list\" :key=\"index\">\r\n      <van-cell :label=\"item.spContent\">\r\n        <template slot=\"title\">\r\n          <span class=\"custom-title\">安全隐患</span>\r\n          <van-tag type=\"danger\">{{item.hdGrade}}</van-tag>\r\n        </template>\r\n      </van-cell>\r\n      <van-cell title=\"整改要求\" :label=\"item.srContent\"></van-cell>\r\n      <van-cell title=\"附件\">\r\n          <template slot=\"label\">\r\n             <span>\r\n                <viewer :images=\"item.files\">\r\n                  <img v-for=\"(src,index) in item.files\" :src=\"fileURL+src.FilePath\" :key=\"index\" />\r\n                </viewer>\r\n              </span>\r\n          </template>\r\n      </van-cell>\r\n      <van-cell title=\"整改完成时间\" :value=\"item.srFinishDate\" />\r\n      <van-cell title=\"指定整改人\" :value=\"item.srUserName\" />\r\n      <!-- 循环组件 -->\r\n      <reformLoop :loopConent=\"item.Reply\"></reformLoop>\r\n\r\n      <div v-if=\"$store.state.userID==item.srUserId && item.type==0\">\r\n        <van-cell-group>\r\n          <van-cell title=\"整改说明\">\r\n            <template slot=\"label\">\r\n              <van-field\r\n                v-model=\"sendData.replayContent\"\r\n                rows=\"2\"\r\n                autosize\r\n                type=\"textarea\"\r\n                placeholder=\"请输入整改内容\"\r\n              />\r\n            </template>\r\n          </van-cell>\r\n        </van-cell-group>\r\n        <van-uploader\r\n          v-model=\"fileList\"\r\n          capture=\"camera\"\r\n          multiple\r\n          :max-count=\"3\"\r\n          :after-read=\"afterRead\"\r\n          preview-size=\"70\"\r\n        />\r\n        <van-button type=\"info\" size=\"large\" @click=\"save\">提交保存</van-button>\r\n      </div>\r\n    </van-cell-group>\r\n  </div>\r\n</template>\r\n<script>\r\nimport self from \"@/api/self\";\r\nimport reform from \"@/api/reform\";\r\nexport default {\r\n  props: [\"list\", \"subscript\", \"id\"],\r\n  components: {\r\n    reformLoop: () => import(\"./reformLoop.vue\")\r\n  },\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      type: \"SafetyReply\", // 安全\r\n      fileList: [], // 图片预览\r\n      sendData: {\r\n        id: \"\", //安全巡检id\r\n        replayUserId: \"\", // 回复人id\r\n        replayUserName: \"\", // 回复人名称\r\n        srId: \"\", // 整改内容id\r\n        replayType: 0,\r\n        replayState: 0,\r\n        replayContent: \"\", // 整改内容\r\n        filesId: \"\" // 文件id\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    afterRead(file) {\r\n      let formData = new FormData();\r\n      formData.append(\"type\", this.type);\r\n      if (file.length > 0) {\r\n        for (let key of file) {\r\n          formData.append(\"file\", key.file);\r\n        }\r\n      } else {\r\n        formData.append(\"file\", file.file);\r\n      }\r\n      self.uploadFile(formData).then(res => {\r\n        if (res.data.success == 0) {\r\n          this.sendData.filesId = res.data.obj;\r\n        }\r\n      });\r\n    },\r\n    save() {\r\n      this.sendData.id = this.id;\r\n      this.sendData.replayUserId = this.list[0].srUserId;\r\n      this.sendData.replayUserName = this.list[0].srUserName;\r\n      this.sendData.srId = this.list[0].srid;\r\n      if (this.sendData.replayContent.length == 0) {\r\n        this.$toast(\"请输入整改内容\");\r\n        return false;\r\n      }\r\n      reform.getSelf(this.sendData).then(res => {\r\n        if (res.data.success == 0) {\r\n          this.$toast(\"整改成功\");\r\n          this.reload();\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.reformConent {\r\n  height: 100%;\r\n  padding: 0 0.2rem 0.2rem 0.2rem;\r\n}\r\n.van-cell {\r\n  position: relative;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: flex;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  padding: 0.2rem 0.2rem 0.2rem 0.5rem;\r\n  overflow: hidden;\r\n  color: #323233;\r\n  font-size: 0.3rem;\r\n  line-height: 0.53333rem;\r\n  background-color: #fff;\r\n}\r\n.van-cell__value {\r\n  position: relative;\r\n  overflow: hidden;\r\n  color: #1989fa;\r\n  text-align: left;\r\n  vertical-align: middle;\r\n}\r\n\r\nimg {\r\n  width: 1.2rem;\r\n  height: 1.2rem;\r\n  margin: 0 0.1rem;\r\n}\r\n.van-cell-group {\r\n  background-color: #fff;\r\n  margin-bottom: 0.2rem;\r\n}\r\n.van-cell__label {\r\n  margin-top: 3px;\r\n  color: #1989fa;\r\n  font-size: 12px;\r\n  line-height: 18px;\r\n}\r\n.van-uploader {\r\n  position: relative;\r\n  display: inline-block;\r\n  margin-left: 0.5rem;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/reformConent.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reformConent\"},_vm._l((_vm.list),function(item,index){return _c('van-cell-group',{key:index},[_c('van-cell',{attrs:{\"label\":item.spContent}},[_c('template',{slot:\"title\"},[_c('span',{staticClass:\"custom-title\"},[_vm._v(\"安全隐患\")]),_vm._v(\" \"),_c('van-tag',{attrs:{\"type\":\"danger\"}},[_vm._v(_vm._s(item.hdGrade))])],1)],2),_vm._v(\" \"),_c('van-cell',{attrs:{\"title\":\"整改要求\",\"label\":item.srContent}}),_vm._v(\" \"),_c('van-cell',{attrs:{\"title\":\"附件\"}},[_c('template',{slot:\"label\"},[_c('span',[_c('viewer',{attrs:{\"images\":item.files}},_vm._l((item.files),function(src,index){return _c('img',{key:index,attrs:{\"src\":_vm.fileURL+src.FilePath}})}),0)],1)])],2),_vm._v(\" \"),_c('van-cell',{attrs:{\"title\":\"整改完成时间\",\"value\":item.srFinishDate}}),_vm._v(\" \"),_c('van-cell',{attrs:{\"title\":\"指定整改人\",\"value\":item.srUserName}}),_vm._v(\" \"),_c('reformLoop',{attrs:{\"loopConent\":item.Reply}}),_vm._v(\" \"),(_vm.$store.state.userID==item.srUserId && item.type==0)?_c('div',[_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"整改说明\"}},[_c('template',{slot:\"label\"},[_c('van-field',{attrs:{\"rows\":\"2\",\"autosize\":\"\",\"type\":\"textarea\",\"placeholder\":\"请输入整改内容\"},model:{value:(_vm.sendData.replayContent),callback:function ($$v) {_vm.$set(_vm.sendData, \"replayContent\", $$v)},expression:\"sendData.replayContent\"}})],1)],2)],1),_vm._v(\" \"),_c('van-uploader',{attrs:{\"capture\":\"camera\",\"multiple\":\"\",\"max-count\":3,\"after-read\":_vm.afterRead,\"preview-size\":\"70\"},model:{value:(_vm.fileList),callback:function ($$v) {_vm.fileList=$$v},expression:\"fileList\"}}),_vm._v(\" \"),_c('van-button',{attrs:{\"type\":\"info\",\"size\":\"large\"},on:{\"click\":_vm.save}},[_vm._v(\"提交保存\")])],1):_vm._e()],1)}),1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7fbf5502\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/reformConent.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7fbf5502\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./reformConent.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./reformConent.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./reformConent.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7fbf5502\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./reformConent.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7fbf5502\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/reformConent.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/get-iterator.js\n// module id = BO1k\n// module chunks = 0 22 23 24","\r\nimport http from \"./request\"\r\nexport default {\r\n      // 自检查询\r\n    getSelfList(data){\r\n        return http.post(\"/NewSafetyPatrolController/searchList\",data)\r\n    },\r\n    // 自检明细\r\n    selfDeatil(data){\r\n        return http.post(\"/NewSafetyPatrolController/searchOne\",data)\r\n    },\r\n    //下发整改单\r\n    downRectify(data){\r\n        return http.post(\"/SafetyRectification/appointRectification\",data)\r\n    },\r\n    //文件上传\r\n    uploadFile(data){\r\n        return http.post(\"/safetyPatrol/pictureUpload\",data)\r\n    },\r\n    //自检新增\r\n    addSelf(data){\r\n        return http.post(\"/NewSafetyPatrolController/add\",data)\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/self.js","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/get-iterator.js\n// module id = fxRn\n// module chunks = 0 22 23 24","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator.js\n// module id = g8Ux\n// module chunks = 0 22 23 24"],"sourceRoot":""}