webpackJsonp([4],{"2qY1":function(t,e){},KsAx:function(t,e,n){"use strict";e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=e.getFullYear(),i=e.getMonth()+1>9?""+(e.getMonth()+1):"0"+(e.getMonth()+1),a=e.getDate()>9?""+e.getDate():"0"+e.getDate(),r=e.getHours()>9?""+e.getHours():"0"+e.getHours(),o=e.getMinutes()>9?""+e.getMinutes():"0"+e.getMinutes(),s=e.getSeconds()>9?""+e.getSeconds():"0"+e.getSeconds();return null==t?n+"-"+i+"-"+a:""+t+n+"-"+i+"-"+a+" "+r+":"+o+":"+s}},LNai:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("BO1k"),a=n.n(i),r=n("KsAx"),o=n("SW5p"),s=n("cN47"),c={components:{banch:function(){return n.e(34).then(n.bind(null,"3xBp"))},project:function(){return n.e(30).then(n.bind(null,"2E4k"))},kind:function(){return n.e(35).then(n.bind(null,"9bVq"))},empty:function(){return n.e(32).then(n.bind(null,"KeBu"))},examine:function(){return n.e(33).then(n.bind(null,"4rlc"))},notify:function(){return n.e(31).then(n.bind(null,"sFvs"))}},data:function(){return{formData:{projectId:"",projectName:"",sppName:"",ipId:"",ipName:"",sppCheckUserId:"",sppCheckUserName:"",sppBeginDate:"",sppEndDate:"",sppContent:"",sppContentName:"",sppNotifier:"",sppNotifierName:"",sppIsCreateSafetyPatrol:0,sppDepartmentId:"",sppDepartmentName:"",spCreatePersonId:"",spCreatePersonName:""},flag:!1,isBanch:!1,isProject:!1,isKind:!1,isEmpty:!1,isExamine:!1,isNotify:!1,isTimer:!1,timeState:"",currentDate:new Date,minDate:new Date}},computed:{limit:function(){var t=new Date(this.formData.sppBeginDate),e=new Date(this.formData.sppEndDate).getTime()-t.getTime();return Math.floor(e/864e5+1)+"天"}},created:function(){this.formData.sppName=Object(r.a)("AQXJ",new Date),this.formData.spCreatePersonId=this.$store.state.userID,this.formData.spCreatePersonName=this.$store.state.userName,this.formData.sppBeginDate=Object(r.a)(null,new Date),this.formData.sppEndDate=Object(r.a)(null,new Date)},methods:{onClickLeft:function(){this.$router.back()},checkBanch:function(t){this.formData.sppDepartmentId=t.id,this.formData.sppDepartmentName=t.name},checkProject:function(t){this.formData.projectId=t.zid,this.formData.projectName=t.name},checKKind:function(t){this.formData.ipName=t.ipName,this.formData.ipId=t.id},isEmptyCheck:function(){var t=this;if(0==this.formData.projectId.length)return this.$toast("请先选择巡检位置"),!1;this.isEmpty=!0,this.flag=!1,this.$nextTick(function(){t.flag=!0})},checKEmpty:function(t){var e="",n="",i=!0,r=!1,o=void 0;try{for(var s,c=a()(t);!(i=(s=c.next()).done);i=!0){var l=s.value;e+=l.id+",",n+=l.hdName+","}}catch(t){r=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(r)throw o}}this.formData.sppContent=e,this.formData.sppContentName=n.split(",")},checKExamine:function(t){this.formData.sppCheckUserId=t.id,this.formData.sppCheckUserName=t.name},isNotifyCheck:function(){var t=this;this.isNotify=!0,this.flag=!1,this.$nextTick(function(){t.flag=!0})},checKNotify:function(t){var e="",n="",i=!0,r=!1,o=void 0;try{for(var s,c=a()(t);!(i=(s=c.next()).done);i=!0){var l=s.value;e+=l.id+",",n+=l.name+","}}catch(t){r=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(r)throw o}}this.formData.sppNotifier=e.substring(0,e.length-1),this.formData.sppNotifierName=n.substring(0,n.length-1)},isTimerCheck:function(t){this.isTimer=!0,this.timeState=t},confirm:function(){"start"==this.timeState?this.formData.sppBeginDate=Object(r.a)(null,this.currentDate):"end"==this.timeState&&(this.formData.sppEndDate=Object(r.a)(null,this.currentDate)),this.isTimer=!1},onClickRight:function(){var t=this;s.a.noEmpty(this.formData.sppCheckUserId,"请选择检查人"),s.a.noEmpty(this.formData.sppContent,"请选择检查项"),s.a.noEmpty(this.formData.ipId,"请选择巡检性质"),s.a.noEmpty(this.formData.projectId,"请选择巡检位置"),s.a.noEmpty(this.formData.sppDepartmentId,"请选择巡检部门"),s.a.noEmpty(this.formData.sppNotifier,"请选择通知人"),o.a.addWait(this.formData).then(function(e){0==e.data.success&&(t.$toast("新增成功"),t.$router.push("/wait"))})}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:"新增待办事项","left-text":"返回","right-text":"保存","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}}),t._v(" "),n("van-cell-group",[n("van-field",{attrs:{label:"待办名称",readonly:"",required:""},model:{value:t.formData.sppName,callback:function(e){t.$set(t.formData,"sppName",e)},expression:"formData.sppName"}}),t._v(" "),n("van-cell",{attrs:{title:"巡检部门",value:t.formData.sppDepartmentName,required:"","is-link":""},on:{click:function(e){t.isBanch=!0}}}),t._v(" "),n("van-cell",{attrs:{title:"巡检位置",value:t.formData.projectName,required:"","is-link":""},on:{click:function(e){t.isProject=!0}}}),t._v(" "),n("van-cell",{attrs:{title:"巡检性质",value:t.formData.ipName,required:"","is-link":""},on:{click:function(e){t.isKind=!0}}}),t._v(" "),n("van-cell",{attrs:{title:"检查项",required:"","is-link":""},on:{click:t.isEmptyCheck}},[n("template",{slot:"label"},[n("ul",t._l(t.formData.sppContentName,function(e,i){return n("li",{key:i},[t._v(t._s(e))])}),0)])],2),t._v(" "),n("van-cell",{attrs:{title:"检查人",value:t.formData.sppCheckUserName,required:"","is-link":""},on:{click:function(e){t.isExamine=!0}}}),t._v(" "),n("van-cell",{attrs:{title:"通知人",label:t.formData.sppNotifierName,required:"","is-link":""},on:{click:t.isNotifyCheck}}),t._v(" "),n("van-cell",{attrs:{title:"开始时间",value:t.formData.sppBeginDate,required:"","is-link":""},on:{click:function(e){return t.isTimerCheck("start")}}}),t._v(" "),n("van-cell",{attrs:{title:"结束时间",value:t.formData.sppEndDate,required:"","is-link":""},on:{click:function(e){return t.isTimerCheck("end")}}}),t._v(" "),n("van-cell",{attrs:{title:"工期（天）",value:t.limit}}),t._v(" "),n("van-cell",{attrs:{title:"创建人",value:t.formData.spCreatePersonName}})],1),t._v(" "),n("van-popup",{style:{width:"100%",height:"60%"},attrs:{position:"bottom"},model:{value:t.isBanch,callback:function(e){t.isBanch=e},expression:"isBanch"}},[n("banch",{on:{cancel:function(e){t.isBanch=!1},getBanch:t.checkBanch}})],1),t._v(" "),n("van-popup",{style:{width:"100%",height:"60%"},attrs:{position:"bottom"},model:{value:t.isProject,callback:function(e){t.isProject=e},expression:"isProject"}},[n("project",{on:{cancel:function(e){t.isProject=!1},getProject:t.checkProject}})],1),t._v(" "),n("van-popup",{style:{width:"100%",height:"60%"},attrs:{position:"bottom"},model:{value:t.isKind,callback:function(e){t.isKind=e},expression:"isKind"}},[n("kind",{on:{cancel:function(e){t.isKind=!1},getKind:t.checKKind}})],1),t._v(" "),n("van-popup",{style:{width:"100%",height:"100%"},attrs:{position:"bottom"},model:{value:t.isEmpty,callback:function(e){t.isEmpty=e},expression:"isEmpty"}},[t.flag?n("empty",{attrs:{id:this.formData.projectId},on:{cancel:function(e){t.isEmpty=!1},getEmpty:t.checKEmpty}}):t._e()],1),t._v(" "),n("van-popup",{style:{width:"100%",height:"60%"},attrs:{position:"bottom"},model:{value:t.isExamine,callback:function(e){t.isExamine=e},expression:"isExamine"}},[n("examine",{on:{cancel:function(e){t.isExamine=!1},getExamine:t.checKExamine}})],1),t._v(" "),n("van-popup",{style:{width:"100%",height:"100%"},attrs:{position:"bottom"},model:{value:t.isNotify,callback:function(e){t.isNotify=e},expression:"isNotify"}},[t.flag?n("notify",{on:{cancel:function(e){t.isNotify=!1},getNotify:t.checKNotify}}):t._e()],1),t._v(" "),n("van-popup",{style:{width:"100%",height:"60%"},attrs:{position:"bottom"},model:{value:t.isTimer,callback:function(e){t.isTimer=e},expression:"isTimer"}},[n("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate},on:{confirm:t.confirm,cancel:function(e){t.isTimer=!1}},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1)},staticRenderFns:[]};var p=n("VU/8")(c,l,!1,function(t){n("2qY1")},"data-v-b74d079c",null);e.default=p.exports},SW5p:function(t,e,n){"use strict";var i=n("l/JR");e.a={getBanch:function(){return i.a.get("/main/getDepartment")},getProject:function(){return i.a.get("/ProjectController/getTreeList")},getKind:function(){return i.a.get("/Sq_jc_InspectionPropertyController/getInspectionPropertyList")},getEmpty:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.a.get("/Sq_jc_HiddenDangerController/getListTree1?projectId="+t)},getExamine:function(){return i.a.get("/main/getUserByDepart")},getNotify:function(){return i.a.get("/main/getname")},addWait:function(t){return i.a.post("/Sq_SafetyPatrolPlanController/addSafetyPatrolPlan",t)}}}});
//# sourceMappingURL=4.7bd8f0e2147b0c5900a8.js.map