{"version":3,"sources":["webpack:///./src/assets/shtoone.png","webpack:///./src/api/login.js","webpack:///./src/units/push.js","webpack:///src/pages/login/login.vue","webpack:///./src/pages/login/login.vue?8209","webpack:///./src/pages/login/login.vue"],"names":["module","exports","__webpack_require__","p","api_login","params","http","get","username","password","back","messagePushReady","type","content","payload","title","plus","push","createMessage","icon","remove","undefined","addEventListener","setTimeout","clientInfo","getClientInfo","pushInfo","clientid","imei","device","length","split","imsi","model","vendor","uuid","u","navigator","userAgent","isAndroid","appVersion","indexOf","isiOS","match","phoneType","login_login","data","sendData","created","this","$store","state","userInfo","methods","submit","_this","reg","noEmpty","then","res","success","commit","obj","token","user","id","realname","$router","initClient","window","client","getClient","clientId","document","pages_login_login","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","attrs","required","clearable","label","placeholder","value","callback","$$v","$set","expression","size","on","click","staticRenderFns","src","alt","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/4.11a521548c6a4b584396.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/shtoone.abad818.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/shtoone.png\n// module id = KVHK\n// module chunks = 4","\r\nimport http from \"@/api/request.js\"\r\n\r\nexport default{\r\n    login(params){\r\n        return http.get(`/tokens?username=${params.username}&password=${params.password}`)\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/login.js","/*\r\n  消息推送\r\n */\r\nvar back = null;\r\n\r\n/**\r\n * 消息推送的入口\r\n * @param type\r\n */\r\nfunction messagePushReady(type, content, payload, title) {\r\n    if (type === 'create') {\r\n        plus.push.createMessage(content, payload, {\r\n            title: title,\r\n            icon: '../assets/shtoone.png'\r\n        });\r\n        back\r\n    } else if (type === 'remove') {\r\n        plus.push.remove(title, content, payload, undefined)\r\n    } else if (type === 'click') {\r\n        plus.push.addEventListener('click', back, true)\r\n    } else if (type === 'getClientId') {\r\n        setTimeout(function () {\r\n                var clientInfo = plus.push.getClientInfo();\r\n                var pushInfo = {};\r\n                pushInfo.clientid = clientInfo.clientid;\r\n                var imei = plus.device.imei;\r\n                if (imei === \"\" || imei === null || imei === undefined) {\r\n                    imei = '';\r\n                } else if (imei.length > 1) {\r\n                    imei = imei.split(\",\")[0];\r\n                }\r\n                pushInfo.imei = imei;\r\n                var imsi = plus.device.imsi;\r\n                if (imei === null || imei.length === 0) {\r\n                    imsi = '';\r\n                } else {\r\n                    imsi = imsi[0];\r\n                }\r\n                pushInfo.imsi = imsi;\r\n                pushInfo.model = plus.device.model;\r\n                pushInfo.vendor = plus.device.vendor;\r\n                var uuid = plus.device.uuid;\r\n                if (uuid === \"\" || uuid === null || uuid === undefined) {\r\n                    uuid = '';\r\n                } else if (uuid.length > 1) {\r\n                    uuid = uuid.split(\",\")[0];\r\n                }\r\n                var u = navigator.userAgent,\r\n                    app = navigator.appVersion;\r\n                var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器\r\n                var isiOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端\r\n                if (isAndroid) {\r\n                    pushInfo.phoneType = 'Android';\r\n                } else if (isiOS) {\r\n                    pushInfo.phoneType = 'IOS';\r\n                } else {\r\n                    pushInfo.phoneType = '';\r\n                }\r\n                pushInfo.uuid = uuid;\r\n                back(pushInfo)\r\n        }, 2000)\r\n    }\r\n}\r\n\r\n\r\nexport const messagePush = function (type, content, payload, title, callback) {\r\n    back = callback;\r\n    if (window.plus) {\r\n        messagePushReady(type, content, payload, title);\r\n    } else {\r\n        document.addEventListener('plusready', messagePushReady(type, content, payload, title), false);\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/units/push.js","<template>\r\n  <div class=\"login\">\r\n    <div class=\"tagImg\">\r\n      <img src=\"../../assets/shtoone.png\" alt />\r\n    </div>\r\n    <h5>安全巡检系统</h5>\r\n    <van-cell-group>\r\n      <van-field v-model=\"sendData.username\" required clearable label=\"用户名\" placeholder=\"请输入用户名\" />\r\n      <van-field\r\n        v-model=\"sendData.password\"\r\n        type=\"password\"\r\n        label=\"密码\"\r\n        placeholder=\"请输入密码\"\r\n        required\r\n      />\r\n    </van-cell-group>\r\n    <van-button type=\"info\" size=\"large\" @click=\"submit\">登录</van-button>\r\n    <p>版权@上海同望信息技术有限公司</p>\r\n  </div>\r\n</template>\r\n<script>\r\nimport login from \"@/api/login\";\r\nimport tool from \"@/units/reg\";\r\nimport client from \"@/api/client\";\r\nimport { messagePush } from \"../../units/push\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      sendData: {\r\n        username: \"\",\r\n        password: \"\"\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.sendData = this.$store.state.userInfo;\r\n  },\r\n  methods: {\r\n    submit() {\r\n      tool.noEmpty(this.sendData.password, \"请输入密码\");\r\n      tool.noEmpty(this.sendData.username, \"请输入用户名\");\r\n      login.login(this.sendData).then(res => {\r\n        if (res.data.success == 0) {\r\n          this.$store.commit(\"setToken\", res.data.obj.token);\r\n          this.$store.commit(\"setUserID\", res.data.obj.user.id);\r\n          this.$store.commit(\"setUserName\", res.data.obj.user.realname);\r\n          this.$store.commit(\"setUserInfo\", this.sendData);\r\n          this.$router.push(\"/\");\r\n          this.initClient();\r\n        }\r\n      });\r\n    },\r\n    // 获取本机信息链接后台\r\n    initClient() {\r\n      if (window.plus) {\r\n        messagePush(\"getClientId\", null, null, null, res => {\r\n          client\r\n            .getClient({\r\n              clientId: res.clientid,\r\n              imei: res.imei,\r\n              imsi: res.imsi,\r\n              model: res.model,\r\n              vendor: res.vendor,\r\n              uuid: res.uuid,\r\n              phoneType: res.phoneType\r\n            })\r\n            .then(res => {});\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style  scoped>\r\n.login {\r\n  padding: 0.2rem;\r\n}\r\n.tagImg {\r\n  width: 2rem;\r\n  height: 2rem;\r\n  margin: 1rem auto 0.1rem;\r\n}\r\n.tagImg img {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: block;\r\n}\r\nh5 {\r\n  text-align: center;\r\n  font-size: 0.4rem;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: normal;\r\n}\r\n\r\np {\r\n  text-align: center;\r\n  font-size: 0.2rem;\r\n  margin-top: 1rem;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/login/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_vm._m(0),_vm._v(\" \"),_c('h5',[_vm._v(\"安全巡检系统\")]),_vm._v(\" \"),_c('van-cell-group',[_c('van-field',{attrs:{\"required\":\"\",\"clearable\":\"\",\"label\":\"用户名\",\"placeholder\":\"请输入用户名\"},model:{value:(_vm.sendData.username),callback:function ($$v) {_vm.$set(_vm.sendData, \"username\", $$v)},expression:\"sendData.username\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"type\":\"password\",\"label\":\"密码\",\"placeholder\":\"请输入密码\",\"required\":\"\"},model:{value:(_vm.sendData.password),callback:function ($$v) {_vm.$set(_vm.sendData, \"password\", $$v)},expression:\"sendData.password\"}})],1),_vm._v(\" \"),_c('van-button',{attrs:{\"type\":\"info\",\"size\":\"large\"},on:{\"click\":_vm.submit}},[_vm._v(\"登录\")]),_vm._v(\" \"),_c('p',[_vm._v(\"版权@上海同望信息技术有限公司\")])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tagImg\"},[_c('img',{attrs:{\"src\":require(\"../../assets/shtoone.png\"),\"alt\":\"\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-618061ca\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/login/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-618061ca\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-618061ca\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-618061ca\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/login/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}