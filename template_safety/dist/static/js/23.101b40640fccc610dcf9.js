webpackJsonp([23],{"9SZf":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("BO1k"),r=a.n(n),s=a("Gwkq"),l=a("9lVq"),i={props:["list","subscript","id"],components:{reformLoop:function(){return a.e(21).then(a.bind(null,"82ZA"))}},inject:["reload"],data:function(){return{type:"SafetyReply",fileList:[],sendData:{id:"",replayUserId:"",replayUserName:"",srId:"",replayType:0,replayState:0,replayContent:"",filesId:""}}},methods:{afterRead:function(t){var e=this,a=new FormData;if(a.append("type",this.type),t.length>0){var n=!0,l=!1,i=void 0;try{for(var o,f=r()(t);!(n=(o=f.next()).done);n=!0){var c=o.value;a.append("file",c.file)}}catch(t){l=!0,i=t}finally{try{!n&&f.return&&f.return()}finally{if(l)throw i}}}else a.append("file",t.file);s.a.uploadFile(a).then(function(t){0==t.data.success&&(e.sendData.filesId=t.data.obj)})},save:function(){var t=this;if(this.sendData.id=this.id,this.sendData.replayUserId=this.list[0].srUserId,this.sendData.replayUserName=this.list[0].srUserName,this.sendData.srId=this.list[0].srid,0==this.sendData.replayContent.length)return this.$toast("请输入整改内容"),!1;l.a.getSelf(this.sendData).then(function(e){0==e.data.success&&(t.$toast("整改成功"),t.reload())})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reformConent"},t._l(t.list,function(e,n){return a("van-cell-group",{key:n},[a("van-cell",{attrs:{label:e.spContent}},[a("template",{slot:"title"},[a("span",{staticClass:"custom-title"},[t._v("安全隐患")]),t._v(" "),a("van-tag",{attrs:{type:"danger"}},[t._v(t._s(e.hdGrade))])],1)],2),t._v(" "),a("van-cell",{attrs:{title:"整改要求",label:e.srContent}}),t._v(" "),a("van-cell",{attrs:{title:"附件"}},[a("template",{slot:"label"},[a("span",[a("viewer",{attrs:{images:e.files}},t._l(e.files,function(e,n){return a("img",{key:n,attrs:{src:t.fileURL+e.FilePath}})}),0)],1)])],2),t._v(" "),a("van-cell",{attrs:{title:"整改完成时间",value:e.srFinishDate}}),t._v(" "),a("van-cell",{attrs:{title:"指定整改人",value:e.srUserName}}),t._v(" "),a("reformLoop",{attrs:{loopConent:e.Reply}}),t._v(" "),t.$store.state.userID==e.srUserId&&0==e.type?a("div",[a("van-cell-group",[a("van-cell",{attrs:{title:"整改说明"}},[a("template",{slot:"label"},[a("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",placeholder:"请输入整改内容"},model:{value:t.sendData.replayContent,callback:function(e){t.$set(t.sendData,"replayContent",e)},expression:"sendData.replayContent"}})],1)],2)],1),t._v(" "),a("van-uploader",{attrs:{capture:"camera",multiple:"","max-count":3,"after-read":t.afterRead,"preview-size":"70"},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}}),t._v(" "),a("van-button",{attrs:{type:"info",size:"large"},on:{click:t.save}},[t._v("提交保存")])],1):t._e()],1)}),1)},staticRenderFns:[]};var f=a("VU/8")(i,o,!1,function(t){a("J/qj")},"data-v-7fbf5502",null);e.default=f.exports},BO1k:function(t,e,a){t.exports={default:a("fxRn"),__esModule:!0}},Gwkq:function(t,e,a){"use strict";var n=a("l/JR");e.a={getSelfList:function(t){return n.a.post("/NewSafetyPatrolController/searchList",t)},selfDeatil:function(t){return n.a.post("/NewSafetyPatrolController/searchOne",t)},downRectify:function(t){return n.a.post("/SafetyRectification/appointRectification",t)},uploadFile:function(t){return n.a.post("/safetyPatrol/pictureUpload",t)},addSelf:function(t){return n.a.post("/NewSafetyPatrolController/add",t)}}},"J/qj":function(t,e){},fxRn:function(t,e,a){a("+tPU"),a("zQR9"),t.exports=a("g8Ux")},g8Ux:function(t,e,a){var n=a("77Pl"),r=a("3fs2");t.exports=a("FeBl").getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}}});
//# sourceMappingURL=23.101b40640fccc610dcf9.js.map